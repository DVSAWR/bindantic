# Automatically generated by bindantic - please adjust!

include "keys/tsig-keys.conf";
include "keys/key-stores.conf";

include "dnssec/trust-anchors.conf";
include "dnssec/dnssec-policies.conf";

acl clients {
    any;
};

acl trusted {
    10.0.0.0/8;
    192.168.0.0/24;
    key admin-key;
};

tls ephemeral {};
tls secure-tls {
    ca-file "/etc/ssl/certs/ca-bundle.crt";
    cert-file "/etc/ssl/certs/named.crt";
    key-file "/etc/ssl/private/named.key";
    prefer-server-ciphers yes;
    protocols {
        TLSv1.2;
        TLSv1.3;
    };
    session-tickets no;
};

controls {
    inet 127.0.0.1
        allow {
            localhost;
        }
        keys {
            rndc-key;
        }
        read-only no
    ;
    inet ::1 port *
        allow {
            ::1;
        }
        read-only no
    ;
};

server 10.0.0.0/8 {
    request-nsid yes;
    require-cookie yes;
    tcp-only yes;
};
server 192.168.1.0/24 {
    bogus yes;
    edns yes;
    provide-ixfr no;
    request-ixfr no;
};

remote-servers root-servers port 53 source * source-v6 * {
    198.41.0.4;
    199.9.14.201 port 5353;
    2001:503:ba3e::2:30;
};

http doh {
    endpoints {
        "/dns-query";
        "/resolve";
    };
    listener-clients 100;
    streams-per-connection 100;
};

statistics-channels {
    inet * port 80 allow {
        any;
    };
    inet 127.0.0.1 port 8080 allow {
        127.0.0.1;
        ::1;
    };
};

options {
    allow-query {
        clients;
    };
    allow-recursion {
        trusted;
    };
    allow-transfer {
        secondary-servers;
    };
    directory "examples/bind_example";
    dnssec-validation auto;
    lame-ttl 600;
    listen-on {
        127.0.0.1;
        192.168.1.100;
    };
    listen-on-v6 {
        2001:db8::100;
        ::1;
    };
    max-cache-size 90%;
    max-cache-ttl 86400;
    min-cache-ttl 1;
    pid-file "/var/run/named/named.pid";
    recursion yes;
};

logging {
    channel error-log {
        file "/var/log/named/error.log";
        buffered no;
        severity error;
    };
    channel query-log {
        file "/var/log/named/query.log";
        print-category yes;
        print-severity yes;
        print-time iso8601;
        severity info;
    };
    category queries {
        query-log;
    };
    category security {
        error-log;
    };
};

zone 2.0.192.in-addr.arpa. {
    type primary;
    file "zones/reverse.zone";
};

zone example.com. {
    type primary;
    allow-query {
        any;
    };
    allow-transfer {
        secondary-servers;
    };
    dnssec-policy secure-policy;
    file "zones/example.com.zone";
};